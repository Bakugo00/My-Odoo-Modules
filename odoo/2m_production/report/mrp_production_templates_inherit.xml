<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_mrporder_inherit" inherit_id="mrp.report_mrporder">

        <xpath expr="//t[@t-call='web.internal_layout']" position="replace">

         
                <div class="page">
                <center>
                    <div class="oe_structure"/>
                    <div class="row">
                        <div class="col-7 text-center">
                            <span>
                               <b>CLIENT</b>
                            </span>
                            <h2> <span t-field="o.partner_id"/></h2>
                        </div>
                        <div style="width:100%;">
                            <div style="float:left; width:50%; text-align:left;">
                                Ordre De Fabrication<br/>
                                <b><span t-field="o.name"/></b>
                            </div>
                            <div style="float:right; width:50%;text-align:right;">
                                Devis N°<br/>
                                <b><span t-field="o.sale_id"/></b>
                            </div>
                        </div>
                    </div>
                </center>
                        <hr style="color:black;"/>
                <center>
                    <div>
                        <div class="text-center">
                            <span>
                               PRODUIT
                            </span>
                            <h2> <span t-field="o.product_tmpl_id"/></h2>
                            <t t-if="o.parent_product != o.product_tmpl_id.name ">
                                <span>
                                PRODUIT PARENT
                                </span>
                                <h2> <span t-field="o.parent_product"/></h2>
                            </t>
                            <span>
                               DATE DE LIVRAISON
                            </span>
                            <br/>
                            <div>
                                <table class="table table-bordered" style="width:75%;border: 1px solid black;border-collapse: collapse;">
                                    <thead>
                                        <tr>
                                            <th style="border: 1px solid black;border-collapse: collapse;">
                                                <t t-set="formatted_date" t-value="o.commitment_date.strftime('%d/%m/%Y')" />
                                                <strong><t t-esc="formatted_date" /></strong>
                                            </th>
                                            <th style="border: 1px solid black;border-collapse: collapse;">
                                                <t t-set="formatted_time" t-value="o.commitment_date.strftime('%H:%M')" />
                                                <strong><t t-esc="formatted_time" /></strong>
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <br/>
                            <span> VALIDÉ SANS BAT : OUI ou NON</span>
                            <br/>
                            <br/>
                        </div>
                        <div >
                            <table class="table table-bordered" style="width:100%;border: 1px solid black;border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th style="border: 1px solid black;border-collapse: collapse;">
                                            Type D'impression
                                        </th>
                                        <th style="border: 1px solid black;border-collapse: collapse;">
                                            Numérique
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="o.product_template_attribute_value_ids" t-as="crctrs">
                                        <td style="border: 1px solid black;border-collapse: collapse;">
                                            <span t-field="crctrs.option_id.name"/>
                                        </td>
                                        <td style="border: 1px solid black;border-collapse: collapse;">
                                            <span t-field="crctrs.name"/>
                                        </td>
                                    </tr>
                                </tbody>
                                <!-- <tr>
                                    <td>
                                        <span t-field="attribute.name"/>
                                    </td>
                                    <td>
                                        <span t-field="attribute.value_id.name"/>
                                    </td>
                                </tr> -->
                            </table>
                        </div>
                        <br/>
                        <span> PROCESSUS</span>
                        <br/>
                        <br/>
                        <div >
                            <table class="table table-bordered" style="width:100%;border: 1px solid black;border-collapse: collapse;">
                                <tbody>
                                    <tr>
                                        <th class="header-column" style="border: 1px solid black;border-collapse: collapse;text-align:left;">
                                            Commerçial
                                        </th>
                                        <td style="border: 1px solid black;border-collapse: collapse;text-align:center;">
                                            Validé par <span t-field="o.commercial_id.name"/>
                                        </td>
                                    </tr>
                                    <tr t-foreach="o.workorder_ids" t-as="workorder">
                                        <th class="header-column" style="border: 1px solid black;border-collapse: collapse;text-align:left;">
                                            <span t-field="workorder.operation_id.name"/>
                                        </th>
                                        <t t-if="workorder.employee_ids">
                                            <td style="border: 1px solid black;border-collapse: collapse;text-align:center;">
                                                Validé par <span t-field="workorder.employee_ids[0].name"/>
                                            </td>
                                        </t>
                                        <t t-else="">
                                            <td style="border: 1px solid black;border-collapse: collapse;">
                                                
                                            </td>
                                        </t>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <br/>
                        <div >
                            <table class="table table-bordered" style="width:100%;border: 1px solid black;border-collapse: collapse;">
                                <thead style="height:50px;">
                                    <tr>
                                        <th style="width:25%;border: 1px solid black;border-collapse: collapse;">
                                            Machine
                                        </th>
                                        <th style="width:25%;border: 1px solid black;border-collapse: collapse;">

                                        </th>
                                        <th style="width:25%;border: 1px solid black;border-collapse: collapse;">
                                            Densité
                                        </th>
                                        <th style="width:25%;border: 1px solid black;border-collapse: collapse;">

                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- <h6> Devis : <span t-field="o.sale_id"/> </h6>
                        <h6> Client : <span t-field="o.partner_id"/> </h6>
                        <h6> Moyen de livraison : <span t-field="o.delivery_method"/> </h6>
                        <h6> Date de livraison : <span t-field="o.commitment_date"/> </h6>
                        <h6> Atelier : Atelier de production </h6>
                        <h6> Lieu de livraison : </h6>
                        <h6> Produit : <span t-field="o.product_id"/> </h6>
                        <h6> Quantité  : <span t-field="o.product_qty"/> </h6>
                        <h5 style="text-decoration: underline;"> Options  :  </h5>
                        <h6>
                            <span t-foreach="o.product_id.product_template_attribute_value_ids" t-as="value">
                                <t t-esc="value.attribute_id.name"/> :
                                <t t-esc="value.name"/>
                                <br/>
                            </span>
                        </h6> -->
                        <!--<h6> Nombre de poses  :  </h6>-->
                        <!--<h6> Nombre de planches  :  </h6>-->
                    </div>
                </center>

<!--                    <div class="row mt32 mb32">-->
<!--                        <div class="col-3" t-if="o.origin">-->
<!--                            <strong>Source Document:</strong>-->
<!--                            <br/>-->
<!--                            <span t-field="o.origin"/>-->
<!--                        </div>-->
<!--                        <div class="col-3">-->
<!--                            <strong>Responsible:</strong>-->
<!--                            <br/>-->
<!--                            <span t-field="o.user_id"/>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="row mt32 mb32">-->
<!--                        <div class="col-3">-->
<!--                            <strong>Finished Product:</strong>-->
<!--                            <br/>-->
<!--                            <span t-field="o.product_id"/>-->
<!--                        </div>-->
<!--                        <div class="col-3" t-if="o.product_description_variants">-->
<!--                            <strong>Description:</strong>-->
<!--                            <br/>-->
<!--                            <span t-field="o.product_description_variants"/>-->
<!--                        </div>-->
<!--                        <div class="col-3">-->
<!--                            <strong>Quantity to Produce:</strong>-->
<!--                            <br/>-->
<!--                            <span t-field="o.product_qty"/>-->
<!--                            <span t-field="o.product_uom_id.name" groups="uom.group_uom"/>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <h3 t-if="o.move_raw_ids">-->
<!--                        <span t-if="o.state == 'done'">-->
<!--                            Consumed Products-->
<!--                        </span>-->
<!--                        <span t-else="">-->
<!--                            Products to Consume-->
<!--                        </span>-->
<!--                    </h3>-->

<!--                    <table class="table table-sm" t-if="o.move_raw_ids">-->
<!--                        <t t-set="has_product_barcode" t-value="any(m.product_id.barcode for m in o.move_raw_ids)"/>-->
<!--                        <thead>-->
<!--                            <tr>-->
<!--                                <th>Product</th>-->
<!--                                <th t-attf-class="{{ 'text-right' if not has_product_barcode else '' }}">Quantity-->
<!--                                </th>-->
<!--                                <th t-if="has_product_barcode" width="15%" class="text-center">Barcode</th>-->
<!--                            </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                            <t t-if="o.move_raw_ids">-->
<!--                                <tr t-foreach="o.move_raw_ids" t-as="raw_line">-->
<!--                                    <td>-->
<!--                                        <span t-field="raw_line.product_id"/>-->
<!--                                    </td>-->
<!--                                    <td t-attf-class="{{ 'text-right' if not has_product_barcode else '' }}">-->
<!--                                        <span t-field="raw_line.product_uom_qty"/>-->
<!--                                        <span t-field="raw_line.product_uom" groups="uom.group_uom"/>-->
<!--                                    </td>-->
<!--                                    <td t-if="has_product_barcode" width="15%" class="text-center">-->
<!--                                        <t t-if="raw_line.product_id.barcode">-->
<!--                                            <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', raw_line.product_id.barcode, 600, 100)"-->
<!--                                                 style="width:100%;height:35px" alt="Barcode"/>-->
<!--                                        </t>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </t>-->
<!--                        </tbody>-->
<!--                    </table>-->

                    <!-- <div class="oe_structure"/> -->
                </div>

        </xpath>

    </template>
    <record id="paperformat_2m_report" model="report.paperformat">
        <field name="name">2m Ordre de Production</field>
        <field name="default" eval="True"/>
        <field name="format">custom</field>
        <field name="page_height">200</field>
        <field name="page_width">85</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">5</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">96</field>
    </record>
    <record id="mrp.action_report_production_order" model="ir.actions.report">
            <field name="paperformat_id" ref="2m_production.paperformat_2m_report"/>
        </record>


</odoo>
