<?xml version='1.0' encoding='utf-8'?>
<odoo noupdate="0">
    <data>

        <record id="res_partner_form_inherit" model="ir.ui.view">
            <field name="name">res.partner.form.inherit"</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form/sheet" position="before">
                    <header>
                        <button  string="APPELER" name="call_partner" type="object" class="btn-primary" />
                    </header>
                </xpath>
                <xpath expr="//field[@name='vat']" position="after">
                    <field name="rc" attrs="{'invisible': [('company_type','=','person')]}"/>
                    <field name="nif" attrs="{'invisible': [('company_type','=','person')]}"/>
                    <field name="nis" attrs="{'invisible': [('company_type','=','person')]}"/>
                    <field name="ai" attrs="{'invisible': [('company_type','=','person')]}"/>

                    <field name="capital" attrs="{'invisible': [('company_type','=','person')]}"/>
                    <field name="turnover" attrs="{'invisible': [('company_type','=','person')]}"/>
                    <field name="nbr_employees" attrs="{'invisible': [('company_type','=','person')]}"/>

                    <field name="company_status_id"
                           options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True}"
                           attrs="{'invisible': [('company_type','=','person')]}"/>
                    <field name="company_type_id"
                           options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True}"
                           attrs="{'invisible': [('company_type','=','person')]}"/>
                    <field name="company_state_id"
                           options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True}"
                           attrs="{'invisible': [('company_type','=','person')]}"/>
                </xpath>

                <xpath expr="//field[@name='vat']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='category_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='title']" position="attributes">
                    <attribute name="options">{'no_create_edit': True , 'no_open':True,'no_quick_create': True,'no_create': True }</attribute>
                </xpath>
                <xpath expr="//field[@name='title']" position="after">
                    <field name="contact_type" attrs="{'invisible': [('company_type','=','company')]}"/>
                </xpath>

                <!--                <xpath expr="//field[@name='phone']" position="attributes">-->
                <!--                    <attribute name="readonly">1</attribute>-->
                <!--                </xpath>-->

                <!--                <xpath expr="//field[@name='email']" position="attributes">-->
                <!--                    <attribute name="readonly">1</attribute>-->
                <!--                </xpath>-->

                <!--                <xpath expr="//field[@name='mobile']" position="attributes">-->
                <!--                    <attribute name="readonly">1</attribute>-->
                <!--                </xpath>-->

                <xpath expr="//sheet/notebook/page[@name='contact_addresses']/field[@name='child_ids']/form/sheet"
                       position="inside">
                    <notebook>
                        <page name='emails_phones' string="Emails &amp; Téléphones">
                            <group>
                                <group string="Emails" name="emails" priority="1">
                                    <field name="email_ids" nolabel="1">
                                        <kanban class="o_kanban_record_top" colors="green:default_email==True;">
                                            <templates>
                                                <t t-name="kanban-box">
                                                    <div t-attf-class="oe_kanban_global_click">
                                                        <div class="oe_kanban_details">
                                                            <field name="default_email" widget="checkboxes"/>
                                                            <b>Email :</b>
                                                            <field name="name"/>
                                                        </div>
                                                    </div>
                                                </t>
                                            </templates>
                                            <!--                                            <templates>-->
                                            <!--                                                <t t-name="kanban-box">-->
                                            <!--                                                    <div t-attf-class="oe_kanban_global_click">-->
                                            <!--                                                        <div class="oe_kanban_details">-->
                                            <!--                                                            &lt;!&ndash;                                                <div class="o_kanban_record_top">&ndash;&gt;-->
                                            <!--                                                            &lt;!&ndash;                                                    <div class="o_kanban_record_headings">&ndash;&gt;-->
                                            <!--                                                            &lt;!&ndash;                                                        <strong class="o_kanban_record_title">Title Goes Here</strong>&ndash;&gt;-->
                                            <!--                                                            &lt;!&ndash;                                                    </div>&ndash;&gt;-->
                                            <!--                                                            &lt;!&ndash;                                                </div>&ndash;&gt;-->

                                            <!--&lt;!&ndash;                                                            <b>Par défaut</b>&ndash;&gt;-->
                                            <!--&lt;!&ndash;                                                            <field name="default_email" widget="checkboxes"/>&ndash;&gt;-->
                                            <!--                                                            <b>Email :</b>-->
                                            <!--                                                            <field name="name" widget="email"/>-->
                                            <!--                                                        </div>-->
                                            <!--                                                    </div>-->
                                            <!--                                                </t>-->
                                            <!--                                            </templates>-->
                                        </kanban>
                                    </field>

                                </group>

                                <group string="Téléphones" name="phones" priority="2">
                                    <field name="phone_ids" nolabel="1">
                                        <kanban class="o_kanban_record_top">
                                            <templates>
                                                <t t-name="kanban-box">
                                                    <div t-attf-class="oe_kanban_global_click">
                                                        <div class="oe_kanban_details">
                                                            <field name="default_phone" widget="checkboxes"/>
                                                            <b>Téléphone :</b>
                                                            <field name="name"/>
                                                        </div>
                                                    </div>
                                                </t>
                                            </templates>
                                        </kanban>
                                    </field>

                                </group>

                            </group>
                        </page>
                    </notebook>
                </xpath>

                <xpath expr="//sheet/notebook/page[@name='contact_addresses']" position="after">
                    <page name='emails_phones' string="Emails &amp; Téléphones">
                        <group>
                            <group string="Emails" name="emails" priority="1">
                                <field name="email_ids" nolabel="1">
                                    <kanban class="o_kanban_record_top" colors="green:default_email==True;">
                                        <templates>
                                            <t t-name="kanban-box">
                                                <div t-attf-class="oe_kanban_global_click">
                                                    <div class="oe_kanban_details">
                                                        <field name="default_email" widget="checkboxes"/>
                                                        <b>Email :</b>
                                                        <field name="name"/>
                                                    </div>
                                                </div>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>

                            </group>

                            <group string="Téléphones" name="phones" priority="2">
                                <field name="phone_ids" nolabel="1">
                                    <kanban class="o_kanban_record_top">
                                        <templates>
                                            <t t-name="kanban-box">
                                                <div t-attf-class="oe_kanban_global_click">
                                                    <div class="oe_kanban_details">
                                                        <field name="default_phone" widget="checkboxes"/>
                                                        <b>Téléphone :</b>
                                                        <field name="name"/>
                                                    </div>
                                                </div>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>

                            </group>

                        </group>
                    </page>

                </xpath>

                <group name="purchase" position="inside">
                    <field name="supplier"/>
                </group>

                <group name="sale" position="inside">
                    <field name="customer"/>
                </group>

                <!-- ****************  Add options to fields  ****************** -->

                <xpath expr="//field[@name='parent_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit': True,'no_quick_create': True,
                        'no_open': True}
                    </attribute>
                </xpath>

                <xpath expr="//page[@name='contact_addresses']/field[@name='child_ids']/form/sheet/field[@name='user_id']"
                       position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit': True,'no_quick_create': True,
                        'no_open': True}
                    </attribute>
                </xpath>

                <xpath expr="//page[@name='sales_purchases']/group/group/field[@name='user_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit': True,'no_quick_create': True,
                        'no_open': True}
                    </attribute>
                </xpath>

                <xpath expr="//field[@name='industry_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit': True,'no_quick_create': True,
                        'no_open': True}
                    </attribute>
                </xpath>
                <xpath expr="//header" position="inside">
                    <field name="customer_state" widget="statusbar"/>
                </xpath> 

            </field>
        </record>
        <record id="res_partner_tree_inherit_" model="ir.ui.view">
            <field name="name">res.partner.tree.inherit.2</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='company_id']" position="after">
                    <button name="call_partner"  type="object" string="Appeler" class="btn btn-link" icon="fa-phone" />
                </xpath>
                <xpath expr="//field[@name='phone']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="customer_state"
                        decoration-success="customer_state == 'client'"
                        decoration-primary="customer_state == 'prospect'"
                        decoration-info="customer_state == 'suspect'"
                        widget="badge" optional="show"/>
                </xpath>
                </field>    
        </record>

        <record id="res_partner_view_kanban_inherit_ep_base" model="ir.ui.view">
            <field name="name">res.partner.view.kanban.inherit.ep_base</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.res_partner_kanban_view"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('oe_kanban_bottom_right')]" position="inside">
                    <field name="customer_state" widget="label_selection" options="{'classes': {'client': 'success', 'prospect': 'primary','suspect':'info'}}"/>
                </xpath>
            </field>
        </record>

        <!-- add domain for CRM/sales/client menu-->
        <record id="base.action_partner_form" model="ir.actions.act_window">
            <field name="domain">[('search_client_ids','=',1)]</field>
            <field name="context">{'create':True}</field>
        </record>
        <!--Menu prospects- CRM/sales/prospects-->
        <record id="action_partner_form_prospect" model="ir.actions.act_window">
            <field name="name">Prospects</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('search_prospect_ids','=',1)]</field>
            <field name="context">{'create':True}</field>
        </record>
        <!--Menu suspects-CRM/sales/suspects-->
        <record id="action_partner_form_suspect" model="ir.actions.act_window">
            <field name="name">Suspect</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('search_suspects_ids','=',1)]</field>
            <field name="context">{'create':True}</field>
        </record>
        

        <!--        <record id="purchase_order_is_customer_is_vendor_form" model="ir.ui.view">-->
        <!--            <field name="name">purchase.order.is_customer.is_vendor.form</field>-->
        <!--            <field name="model">purchase.order</field>-->
        <!--            <field name="inherit_id" ref="purchase.purchase_order_form"/>-->
        <!--            <field name="arch" type="xml">-->
        <!--                <field name="partner_id" position="attributes">-->
        <!--                    <attribute name="context">-->
        <!--                        {'res_partner_search_mode': 'supplier', 'show_vat':True, 'default_supplier':True,-->
        <!--                        'default_is_company':True}-->
        <!--                    </attribute>-->
        <!--                    <attribute name="domain">[('supplier','=',True)]</attribute>-->
        <!--                </field>-->
        <!--            </field>-->
        <!--        </record>-->

    </data>
</odoo>