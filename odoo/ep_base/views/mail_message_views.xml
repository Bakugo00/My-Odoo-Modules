<?xml version="1.0"?>
<odoo>

    <record id="mail_message_action" model="ir.actions.act_window">
        <field name="name">Activités Terminés</field>
        <field name="res_model">mail.message</field>
        <field name="domain">[('subtype_id','=', 3)]</field>
        <field name="context">{ "create": False, "edit": False, "delete": False }</field>
        <!--        <field name="domain">[('subtype_id','=', '%(mail.mt_activities)d' ) ]</field>-->
        <!--        <field name="domain_force" eval="[('subtype_id', 'in', ref('mail.mt_activities').ids)]"/>-->
        <field name="view_mode">tree,form,graph</field>
    </record>

    <menuitem
            id="menu_mail_message"
            action="mail_message_action"
            parent="mail.mail_menu_technical"
            sequence="11"
    />

    <record id="mail_message_view_form" model="ir.ui.view">
        <field name="name">mail.message.view.form</field>
        <field name="model">mail.message</field>
        <field name="arch" type="xml">
            <form create="false">
                <sheet string="Activités Terminés">
                    <group>
                        <group>
                            <field name="mail_activity_type_id" options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True, 'no_open':True}"/>
                            <field name="summary"/>
                            <field name="company_id" invisible="1"/>
                            <field name="result_categ_id" options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True, 'no_open':True}"/>
                            <field name="result_id" options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True, 'no_open':True}"/>
                            <field name="contact_id" options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True, 'no_open':True}"/>
                        </group>
                        <group>
                            <field name="date_deadline"/>
                            <field name="date"/>
                            <field name="user_id" string="Assigné à" options="{'no_create': True, 'no_create_edit': True,'no_quick_create': True, 'no_open': True, 'no_open':True}"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="mail_message_view_tree" model="ir.ui.view">
        <field name="name">mail.message.view.tree</field>
        <field name="model">mail.message</field>
        <field name="arch" type="xml">
            <tree string="Messages">
                <field name="record_name" string="Nom du document"/>
                <field name="contact_id"/>
                <field name="icone_code" widget="html" string=" "/>
                <field name="mail_activity_type_id" string="Type d'activité"/>
                <field name="summary"/>
                <field name="company_id" invisible="1"/>
                <field name="date_deadline"/>
                <field name="user_id" string="Utilisateur"/>
                <field name="subtype_id" invisible="1"/>
                <field name="description" invisible="1"/>
                <field name="subject" invisible="1"/>
                <field name="result_categ_id"/>
                <field name="result_id"/>
                <field name="date" string="Marqué Comme Fait le"/>
            </tree>
        </field>
    </record>

    <record id="mail_message_graph" model="ir.ui.view">
        <field name="name">mail.message.report_graph</field>
        <field name="model">mail.message</field>
        <field name="arch" type="xml">
            <graph string="Graphe des Activités Terminés" sample="1">
                <field name="mail_activity_type_id"/>
                <field name="user_id" string="Utilisateur"/>
                <field name="result_categ_id" type="measure"/>
                <field name="result_id" type="measure"/>
            </graph>
        </field>
    </record>

    <record model="ir.ui.view" id="view_message_search_inherit">
        <field name="name">mail.message.search.inherit</field>
        <field name="model">mail.message</field>
        <field name="inherit_id" ref="mail.view_message_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search/field[@name='subject']" position="after">
                <field name="contact_id"/>
            </xpath>
        </field>
    </record>

</odoo>
