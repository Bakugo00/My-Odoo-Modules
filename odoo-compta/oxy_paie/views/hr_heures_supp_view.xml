<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record id="heures_supp_view_tree" model="ir.ui.view">
			<field name="name">Heures supplémentaire</field>
			<field name="model">hr.heures.supp</field>
			<field name="arch" type="xml">
				<tree string='Heures supplémentaire' editable="bottom">
					<field name="date" required="1"/>
					<field name="employee_id" required="1" domain="[('non_actif', '=', False)]"/>
					<field name="type_id" required="1"/>
					<field name="qte" required="1" widget="float_time"/>
				</tree>
			</field>
		</record>

		<record id="heures_supp_search_view" model="ir.ui.view">
			<field name="name">heures_supp.search.view</field>
			<field name="model">hr.heures.supp</field>
			<field name="arch" type="xml">
				<search string="Heures supplémentaire">
					<filter string="Mois courant" name="currentmonths" domain="[('date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')), ('date','&gt;=',time.strftime('%%Y-%%m-01'))]"/>
					<filter string="Mois passé" name="lastmonths" domain="[('date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')),('date','&lt;',time.strftime('%%Y-%%m-01'))]"/>				
					<filter string='Employé' name="employee" domain="[]" context="{'group_by' : 'employee_id'}"/>
				</search>
			</field>
		</record>

		<record id="action_heures_supp" model="ir.actions.act_window">
			<field name="name">Heures supplémentaire</field>
			<field name="res_model">hr.heures.supp</field>
			<field name="view_mode">tree</field>
			<field name="domain">[]</field>
			<field name="context">{}</field>
		</record>

		<menuitem 
			name="Heures supplémentaire"
			id="menu_heures_supp"
			parent="oxy_paie.menu_pointage"
			groups="hr.group_hr_user"
			action="action_heures_supp"/>
	</data>
</odoo>