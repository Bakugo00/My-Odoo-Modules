<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<template id="journal_paie">
	    <t t-call="web.basic_layout">
			<div class='header'>
				<div class='row'>
					<div class='col-6' style="float:left">
						<b><span t-esc="env.company.name"/></b><br/>
						<span t-esc="env.company.street"/> <span t-esc="env.company.street2"/> <span t-esc="env.company.city"/>
					</div>
					<div class='col-6' style="float:right">
		                <span style='float:right'>Page:<span class="page"/></span><br/>
		                <span style='float:right'>Edition du <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d-%m-%Y %H:%M')"/></span>
					</div>
				</div>
			</div>
	        <div class="page" style="font-family:Calibri;">
	        	<table width='100%'>
	        		<tr>
	        			<td width='60%' style="text-align: right"><b>JOURNAL DE PAIE</b></td>
	        			<td width='40%' style="text-align: right"><span t-esc="month"/></td>
	        		</tr>
	        	</table>
	        	<br/>
	        	<div class="row">
	        		<div class="col-3" style='padding-right:0'>
		        		<table width='100%'>
		        			<tr>
			        			<th style="border : 1px solid black;text-align: center;width:20%;border-right:0">MATRICULE<br/>NOM et PRENOM</th>
		        			</tr>
		        		</table>
	        		</div>
	        		<div class="col-9" style='padding-left:0'>
			        	<table class='pull-right' width='100%'>
			        		<tr>
			        			<th style="border : 1px solid black;text-align: center;width:30%;padding-bottom:0">RUBRIQUES</th>
			        			<th style="border : 1px solid black;text-align: center;width:10%;padding-bottom:0">CODE<br/>RUB.</th>
			        			<th style="border : 1px solid black;text-align: center;width:20%;padding-bottom:0">NBRE ou BASE</th>
			        			<th style="border : 1px solid black;text-align: center;width:10%;padding-bottom:0">TAUX</th>
			        			<th style="border : 1px solid black;text-align: center;width:15%;padding-bottom:0">GAINS</th>
			        			<th style="border : 1px solid black;text-align: center;width:15%;padding-bottom:0">RETENUES</th>
			        		</tr>
			        	</table>
			        </div>
			    </div>
			    <t t-foreach='get_payslips' t-as='payslip'>
			   		<div class='row'>
		        		<div class="col-3" style='padding-right:0'>
			        		<table width='100%'>
			        			<tr>
				        			<td style="border:0;border-right:0;padding:5px;padding-top:25px">
				        				MAT : <span t-esc='payslip.employee_id.matricule'/><br/>
				        				<span t-esc='payslip.employee_id.name'/><span t-esc='payslip.employee_id.prenom'/><br/>
				        				<span t-esc='payslip.employee_id.job_id.name'/>
				        			</td>
			        			</tr>
			        		</table>
		        		</div>
		        		<div class="col-9" style='padding-left:0'>
				        	<table class='pull-right' width='100%'>
				        		<tr t-foreach="payslip.line_ids" t-as='line'>
				        			<t t-if='line.salary_rule_id.appears_on_payslip'>
					        			<td style="border : 1px solid black;width:30%;padding-top:0;border-top:0;padding:5px">
					        				<span t-esc='line.name'/>
					        			</td>
					        			<td style="border : 1px solid black;text-align: center;width:10%;padding-top:0;border-top:0">
					        				<span t-esc='line.code'/>
					        			</td>
					        			<td style="border : 1px solid black;text-align: right;width:20%;padding-top:0;border-top:0;padding:5px">
					        				<t t-if='base(line) != 0'>
					        					<span t-esc='base(line)' t-options='{"widget": "float", "precision": 2}'/>
					        				</t>
					        			</td>
					        			<td style="border : 1px solid black;text-align: right;width:10%;padding-top:0;border-top:0;padding:5px">
					        				<t t-if='taux(line) != 0'>
					        					<span t-esc='taux(line)' t-options='{"widget": "float", "precision": 2}'/>
					        				</t>
					        			</td>
					        			<td style="border : 1px solid black;text-align: right;width:15%;padding-top:0;border-top:0;padding:5px">
					        				<t t-if='line.salary_rule_id.type=="gain"'><span t-esc='line.total' t-options='{"widget": "float", "precision": 2}'/></t>
					        			</td>
					        			<td style="border : 1px solid black;text-align: right;width:15%;padding-top:0;border-top:0;padding:5px">
					        				<t t-if='line.salary_rule_id.type=="retenu"'><span t-esc='line.total' t-options='{"widget": "float", "precision": 2}'/></t>
					        			</td>
					        		</t>
				        		</tr>
				        	</table>
				        </div>
		        	</div>
		        	<div class='row'>
		        		<div class="col-12" >
					        <table width='100%' >
					        	<tr>
					        		<td width='77%' style='text-align:right;padding:5px;border:1px solid black'><b>TOTAL</b></td>
					        		<td width='11.4%' style='text-align:right;padding:5px;border:1px solid black'><b><span t-esc='totals(payslip)[0]' t-options='{"widget": "float", "precision": 2}'/></b></td>
					        		<td width='11.3%' style='text-align:right;padding:5px;border:1px solid black'><b><span t-esc='totals(payslip)[1]' t-options='{"widget": "float", "precision": 2}'/></b></td>
					        	</tr>
					        	<tr>
					        		<td style='text-align:right;padding:5px;border:1px solid black'><b>NET A PAYER</b></td>
					        		<td colspan="2" style='text-align:center;padding:5px;border:1px solid black'><b><span t-esc='net(payslip)' t-options='{"widget": "float", "precision": 2}'/></b></td>
					        	</tr>
					        </table>
					    </div>
		        	</div>
				</t>
	        	<div class='row'>
	        		<div class='col-12' style='margin-top:20px'>
		        		<table style='width:100%'>
		        			<tr>
		        				<td style='border:1px solid black;padding:5px;text-align:center' rowspan='3'><b>TOTAL GENERAL</b></td>
		        				<td style='border:1px solid black;padding:5px;width:30%'>GAINS</td>
		        				<td style='border:1px solid black;width:22.7%;padding:5px;text-align:right'><b><span t-esc='total_gain' t-options='{"widget": "float", "precision": 2}'/></b></td>
		        			</tr>
		        			<tr>
		        				<td style='border:1px solid black;padding:5px'>RETENUES</td>
		        				<td style='border:1px solid black;padding:5px;text-align:right'><b><span t-esc='total_retenu' t-options='{"widget": "float", "precision": 2}'/></b></td>
		        			</tr>
		        			<tr>
		        				<td style='border:1px solid black;padding:5px'>NET A PAYER</td>
		        				<td style='border:1px solid black;padding:5px;text-align:right'><b><span t-esc='total_net' t-options='{"widget": "float", "precision": 2}'/></b></td>
		        			</tr>
		        		</table>
		        	</div>
	        	</div>
	        </div>
	    </t>
	</template>
</odoo>