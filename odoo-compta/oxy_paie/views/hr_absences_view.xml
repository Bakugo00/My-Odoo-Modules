<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record id="absences_view_tree" model="ir.ui.view">
			<field name="name">Absences</field>
			<field name="model">hr.absences</field>
			<field name="arch" type="xml">
				<tree string='Absences' editable="bottom">
					<field name="employee_id" required="1" domain="[('non_actif', '=', False)]"/>
					<field name="absence_type" required="1"/>
					<field name="date" required="1"/>
					<field name="qte" required="1" widget="float_time"/>
				</tree>
			</field>
		</record>


		<record id="absences_search_view" model="ir.ui.view">
			<field name="name">absences.search.view</field>
			<field name="model">hr.absences</field>
			<field name="arch" type="xml">
				<search string="Absences">
					<filter string="Mois courant" name="currentmonths" domain="[('date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')), ('date','&gt;=',time.strftime('%%Y-%%m-01'))]"/>
					<filter string="Mois passé" name="lastmonths" domain="[('date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')),('date','&lt;',time.strftime('%%Y-%%m-01'))]"/>
					<filter string='Employé' name="employee" domain="[]" context="{'group_by' : 'employee_id'}"/>
				</search>
			</field>
		</record>

		<record id="action_absences" model="ir.actions.act_window">
			<field name="name">Absences</field>
			<field name="res_model">hr.absences</field>
			<field name="view_mode">tree</field>
			<field name="domain">[]</field>
			<field name="context">{}</field>
		</record>

		
		<menuitem 
			name="Pointage"
			id="menu_pointage"
			parent="om_hr_payroll.menu_hr_payroll_configuration"
			groups="hr.group_hr_user"
			
			/>

		<menuitem 
			name="Absences"
			id="menu_absences"
			parent="menu_pointage"
			groups="hr.group_hr_user"
			action="action_absences"
			/>
	</data>
</odoo>